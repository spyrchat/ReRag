# Natural Questions Dataset Configuration
dataset:
  name: "natural_questions"
  version: "1.0.0"
  description: "Google Natural Questions dataset"

# Embedding strategy: dense, sparse, or hybrid
embedding_strategy: hybrid

embedding:
  dense:
    provider: hf
    model_name: sentence-transformers/all-MiniLM-L6-v2
    batch_size: 32
    device: cuda
    vector_name: dense
  sparse:
    provider: fastembed
    model_name: Qdrant/bm25
    vector_name: sparse

# Chunking configuration
chunking:
  strategy: semantic  # Best for Q&A content
  chunk_size: 400     # Smaller chunks for precise Q&A
  chunk_overlap: 50
  max_chunk_size: 600
  sentence_overlap: 1

# Validation settings
validation:
  min_char_length: 30
  max_char_length: 10000
  remove_duplicates: true
  clean_html: true
  preserve_code_blocks: false

# Retriever configuration
retriever:
  type: qdrant
  top_k: 10

# Qdrant settings
qdrant:
  collection: nq_hybrid_v1
  dense_vector_name: dense
  sparse_vector_name: sparse

# Upload settings
upload:
  batch_size: 100
  wait: true
  versioning: true

# Evaluation settings
evaluation:
  k_values: [1, 3, 5, 10, 20]
  similarity_threshold: 0.8
  semantic_matching: true

# Smoke tests
smoke_tests:
  min_success_rate: 0.8
  min_overall_success: 0.7
  golden_queries:
    - query: "What is the capital of France?"
      relevant_doc_ids: []
      min_recall: 0.1
    - query: "How does photosynthesis work?"
      relevant_doc_ids: []
      min_recall: 0.1

# Output configuration
output_dir: "output/natural_questions"

# Embedding cache
embedding_cache:
  enabled: true
  dir: "cache/embeddings/nq"
